# 从开发到生产的全流程环境规划需解决的问题

## 1.序言

在环境规划中，我们经常会规划这样四套关联环境：

* 开发环境：用于开发人员进行设计、编码、联调。
* 测试环境：用于开发人员进行功能测试、回归测试。
* 预发环境：用于业务代表、客户、运营进行版本验收。
* 生产环境：系统的正式运行环境。

做如上四个环境布局容易，但要真正达到效果却面临一系列具体问题的挑战。

## 2.域名规划

四套运行资源需要隔离，可以是借助域名，或者借助其他手段隔离。以域名为例，真域名浪费资源，成本高，如果借助自己的域名服务器或者本地 hosts 文件，容易造成一些不必要的误会。

## 3.如何和关键第三方系统对接

### 3.1 企业外部的支付系统的对接

支付是很多系统的核心功能，但支付功能的开发和测试既要考虑研发的需求，也要兼顾成本、生产数据污染等因素。

### 3.2 公众号规划

微信公众号在越来越多系统架构中出现，如果四个系统四个号，有很大的落地难度。一个账号如果对接四个系统，又会产生很多管理障碍。

### 3.3 企业内部关键系统的对接

新系统或多或少都需要依赖一些既有系统。

* 既有账号系统的对接
* 既有流程系统对接
* 既有中间件系统的对接

## 4.关键数据的管理

数据是系统验证的一部分，既要让开发、测试、预发能基于有效数据进行工作，同时要兼顾数据的安全性。

## 5.资源的分配不均或结构不一致

资源总是有限的，开发、测试、预发的环境在算力总量上都会不及生产环境，同时在一些关键设备上也需要一些调整，如 F5、大机、商业数据库等高价稀有资源。